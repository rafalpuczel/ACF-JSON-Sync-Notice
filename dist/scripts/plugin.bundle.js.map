{"version":3,"sources":["webpack:/webpack/bootstrap bde53a371025ed1af8c0","webpack:///wp/wp-content/plugins/rfs-acf-sync-notice/src/scripts/plugin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","RfsAcfJsonSyncNotice","_classCallCheck","this","data","RFS_ACF_SYNC_NOTICE","mode","noticeMode","autoMode","_container$classList","_spinner$classList","_this","doAutoSync","container","document","createElement","inner","classList","add","apply","spinner","message","assign","className","innerText","autoSync","syncing","appendChild","body","fetch","ajaxurl","method","credentials","headers","Content-Type","Cache-Control","URLSearchParams","action","security","nonce","sync_data","JSON","stringify","syncData","files","url","acfPageUrl","auto_sync_mode","autoSyncMode","then","response","json","ok","redirectUrl","remove","synced","setTimeout","window","location","replace","catch","error","console","log","groupHasSync","modal","modalInner","modalHeading","modalText","modalButtonsContainer","modalButtonSync","modalButtonIgnore","heading","text","href","buttons","sync","label","ignore","role","addEventListener","e","preventDefault","init"],"mappings":"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","file":"plugin.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"multi \\\\wp\\\\wp-content\\\\plugins\\\\rfs-acf-sync-notice\\\\src\\\\scripts\\\\plugin.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bde53a371025ed1af8c0","/*\n  Project: RFS ACF JSON Sync Notice\n  Author: rfswp\n */\n\n/* global RFS_ACF_SYNC_NOTICE */\n\nclass RfsAcfJsonSyncNotice {\n  constructor() {\n    this.data = RFS_ACF_SYNC_NOTICE;\n  }\n\n  init() {\n    switch (this.data.mode) {\n      case 'notice':\n        this.noticeMode();\n        break;\n      default:\n        this.autoMode();\n        break;\n    }\n  }\n\n  autoMode() {\n    if (!this.data.doAutoSync) {\n      return;\n    }\n\n    const container = document.createElement('div');\n    const inner = document.createElement('div');\n    container.classList.add(...['rfs-acf-sync-auto-container', 'show']);\n    inner.classList.add('rfs-acf-sync-auto-inner');\n    const spinner = document.createElement('span');\n    spinner.classList.add(...['spinner', 'is-active']);\n    const message = document.createElement('p');\n\n    Object.assign(message, {\n      className: 'rfs-acf-sync-auto-message',\n      innerText: this.data.autoSync.syncing,\n    });\n\n    inner.appendChild(spinner);\n    inner.appendChild(message);\n    container.appendChild(inner);\n    document.body.appendChild(container);\n\n    fetch(this.data.ajaxurl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Cache-Control': 'no-cache',\n      },\n      body: new URLSearchParams({\n        action: 'rfs_acf_auto_sync',\n        security: this.data.nonce,\n        sync_data: JSON.stringify(this.data.syncData),\n        files: JSON.stringify(this.data.files),\n        url: this.data.acfPageUrl,\n        auto_sync_mode: this.data.autoSyncMode,\n      }),\n    })\n      .then(response => response.json())\n      .then(response => {\n        if (response.ok) {\n          if (response.redirectUrl === 'none') {\n            spinner.remove();\n            message.innerText = this.data.autoSync.synced;\n            message.classList.add('is-synced');\n\n            setTimeout(() => {\n              container.classList.remove('show');\n            }, 500);\n          } else {\n            setTimeout(() => {\n              window.location.replace(response.redirectUrl);\n            }, 1000);\n          }\n        }\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n  noticeMode() {\n    if (!this.data.groupHasSync) {\n      return;\n    }\n\n    const modal = document.createElement('div');\n    modal.classList.add('rfs-acf-sync-modal');\n    const modalInner = document.createElement('div');\n    modalInner.classList.add('rfs-acf-sync-modal-inner');\n    const modalHeading = document.createElement('h2');\n    const modalText = document.createElement('p');\n    const modalButtonsContainer = document.createElement('div');\n    modalButtonsContainer.classList.add('rfs-acf-sync-modal-buttons');\n    const modalButtonSync = document.createElement('a');\n    const modalButtonIgnore = document.createElement('a');\n\n    Object.assign(modalHeading, {\n      className: 'rfs-acf-sync-modal-heading',\n      innerText: this.data.modal.heading,\n    });\n\n    Object.assign(modalText, {\n      className: 'rfs-acf-sync-modal-text',\n      innerText: this.data.modal.text,\n    });\n\n    Object.assign(modalButtonSync, {\n      href: this.data.modal.buttons.sync.url,\n      className: 'rfs-acf-modal-button button button-primary button-large',\n      innerText: this.data.modal.buttons.sync.label,\n    });\n\n    Object.assign(modalButtonIgnore, {\n      href: this.data.modal.buttons.ignore.url,\n      className: 'rfs-acf-modal-button button page-title-action',\n      role: 'button',\n      innerText: this.data.modal.buttons.ignore.label,\n    });\n\n    modalButtonsContainer.appendChild(modalButtonSync);\n    modalButtonsContainer.appendChild(modalButtonIgnore);\n    modalInner.appendChild(modalHeading);\n    modalInner.appendChild(modalText);\n    modalInner.appendChild(modalButtonsContainer);\n    modal.appendChild(modalInner);\n    document.body.appendChild(modal);\n\n    modalButtonIgnore.addEventListener('click', e => {\n      e.preventDefault();\n      modal.classList.add('hide');\n    });\n  }\n}\n\nconst plugin = new RfsAcfJsonSyncNotice();\nplugin.init();\n\n\n\n// WEBPACK FOOTER //\n// ./wp/wp-content/plugins/rfs-acf-sync-notice/src/scripts/plugin.js"]}